<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Nose Generator</title>
    <script src="js/jquery-1.11.3.min.js" ></script>
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="js/head.js"></script>
    <!-- <script src="js/beard.js"></script> -->
    <script src="js/ears.js"></script>
    <script src="js/mouth.js"></script>
    <script src="js/eyes.js"></script>
    <script src="js/hair.js"></script>
    <script src="js/beards.js"></script>
    <script type="text/javascript">

     function changeHead(index) {
       var pathes =  ListOfHeads[index].path;

       for (var i = 0; i < pathes.length; i++) {
         var head = document.getElementById('head' + i);
         head.setAttribute('d', pathes[i]);
       }
     }

     function fillHeadSelector() {
       var headElement = document.getElementById('headSelector');
       for (var i=0; i < ListOfHeads.length; i++) {
         var option = document.createElement('option');
         option.text = ListOfHeads[i].name;
         headElement.add(option);
       }
     }

     function changeEyebrows(index) {
         var pathes =  ListOfEyebrows[index].path;

         for (var i = 0; i < pathes.length; i++) {
             var eyebrow = document.getElementById('eyebrow' + i);
             eyebrow.setAttribute('d', pathes[i]);
         }
     }


     function fillEyebrowSelector() {
       var eyebrowElement = document.getElementById('eyebrowSelector');
       for (var i=0; i < ListOfEyebrows.length; i++) {
         var option = document.createElement('option');
         option.text = ListOfEyebrows[i].name;
         eyebrowElement.add(option);
       }
     }

     function changeEyes(index) {
         var pathes =  ListOfEyes[index].path;

         for (var i = 0; i < pathes.length; i++) {
             var eyes = document.getElementById('eyes' + i);
             eyes.setAttribute('d', pathes[i]);
         }
     }


     function fillEyesSelector() {
       var eyesElement = document.getElementById('eyesSelector');
       for (var i=0; i < ListOfEyes.length; i++) {
         var option = document.createElement('option');
         option.text = ListOfEyes[i].name;
         eyesElement.add(option);
       }
     }

     function changeMouth(index) {
     var pathes =  ListOfLips[index].path;

     for (var i = 0; i < pathes.length; i++) {
           var mouth = document.getElementById('mouth' + i);
           mouth.setAttribute('d', pathes[i]);
       }
     }

     function fillMouthSelector() {
       var mouthElement = document.getElementById('mouthSelector');
       for (var i=0; i < ListOfLips.length; i++) {
         var option = document.createElement('option');
         option.text = ListOfLips[i].name;
         mouthElement.add(option);
       }
     }

     function changeHair(index) {
         var pathes =  ListOfHairs[index].path;

         for (var i = 0; i < pathes.length; i++) {
             var hair = document.getElementById('hair' + i);
             hair.setAttribute('d', pathes[i]);
         }
     }


     function fillHairSelector() {
       var hairElement = document.getElementById('hairSelector');
       for (var i=0; i < ListOfHairs.length; i++) {
         var option = document.createElement('option');
         option.text = ListOfHairs[i].name;
         hairElement.add(option);
       }
     }

     function changeEars(index) {
          var pathes =  ListOfEars[index].path;

          for (var i = 0; i < pathes.length; i++) {
           var ears = document.getElementById('ears' + i);
           ears.setAttribute('d', pathes[i]);
       }
      }

     function fillEarsSelector() {
       var earsElement = document.getElementById('earsSelector');
       for (var i=0; i < ListOfEars.length; i++) {
         var option = document.createElement('option');
         option.text = ListOfEars[i].name;
         earsElement.add(option);
       }
     }

     function mainLoad() {
       fillHeadSelector();
       fillMouthSelector();
       fillHairSelector();
       fillEarsSelector();
       fillEyesSelector();
       fillEyebrowSelector();
     }

     function getSVG() {
       //get svg element.
       var svg = document.getElementById("mySVG");

       //get svg source.
       var serializer = new XMLSerializer();
       var source = serializer.serializeToString(svg);

       //add name spaces.
       if(!source.match(/^<svg[^>]+xmlns="http\:\/\/www\.w3\.org\/2000\/svg"/)){
         source = source.replace(/^<svg/, '<svg xmlns="http://www.w3.org/2000/svg"');
       }
       if(!source.match(/^<svg[^>]+"http\:\/\/www\.w3\.org\/1999\/xlink"/)){
         source = source.replace(/^<svg/, '<svg xmlns:xlink="http://www.w3.org/1999/xlink"');
       }

       //add xml declaration
       source = '<?xml version="1.0" standalone="no"?>\r\n' + source;

       //convert svg source to URI data scheme.
       var url = "data:image/svg+xml;charset=utf-8,"+encodeURIComponent(source);

       //set url value to a element's href attribute.
       document.getElementById("svgLink").href = url;
       //you can download svg file by right click menu.
     }

    </script>
    <style type="text/css">
     html, body {
       height: 100%;
     }

     div.leftpart {
       background-color: #6DD4E8;
       width: 300px;
       height: 100%;
       float: left;
       padding: 25px;
     }

     div.leftpart select {
       width: 230px;
     }

     body {
       background-color: #cceecc;
     }

     div.rightpart {
       background-color: #E8816D;
       height: 100%;
     }
    </style>
  </head>
  <body onload="mainLoad()" >

    <!-- Modal -->
    <div class="modal fade" id="myModal" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Download SVG from the link below</h4>
          </div>
          <div class="modal-body">
            <p><a id="svgLink">Generated SVG link</a></p>
            <p>Right-click the link and select "Save link as..."</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <div class="leftpart">
      <div class="form-group">
        <label for="headSelector" class="control-label">Head:</label>
        <select id="headSelector" class="form-control" onchange="changeHead(this.selectedIndex)">
        </select>
      </div>
      <div class="form-group">
        <label for="eyebrowSelector" class="control-label">Eyebrows:</label>
        <select id="eyebrowSelector" class="form-control" onchange="changeEyebrows(this.selectedIndex)">
        </select>
      </div>
      <div class="form-group">
        <label for="mouthSelector" class="control-label">Mouth:</label>
        <select id="mouthSelector" class="form-control" onchange="changeMouth(this.selectedIndex)">
        </select>
      </div>
      <div class="form-group">
        <label for="hairSelector" class="control-label">Hair:</label>
        <select id="hairSelector" class="form-control" onchange="changeHair(this.selectedIndex)">
        </select>
      </div>
      <div class="form-group">
        <label for="eyesSelector" class="control-label">Eyes:</label>
        <select id="eyesSelector" class="form-control" onchange="changeEyes(this.selectedIndex)">
        </select>
      </div>
      <div class="form-group">
        <label for="earsSelector" class="control-label">Ears:</label>
        <select id="earsSelector" class="form-control" onchange="changeEars(this.selectedIndex)">
        </select>
      </div>
      <br/>
      <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal" onClick="getSVG()">Save SVG</button>
    </div>
    <div class="rightpart">
      <svg id="mySVG"
           version="1.1"
           baseProfile="full"
           viewBox="0 0 500 500"
           height="500"
           width="500"
           xmlns="http://www.w3.org/2000/svg">
        <path id="head0" d="" />
        <path id="head1" d="" />
        <path id="mouth0" d="" />
        <path id="mouth1" d="" />
        <path id="eyes0" d="" />
        <path id="eyes1" d="" />
        <path id="eyes2" d="" />
        <path id="ears0" d="" />
        <path id="ears1" d="" />
        <path id="ears2" d="" />
        <path id="ears3" d="" />
        <path id="ears4" d="" />
        <path id="ears5" d="" />
        <path id="ears6" d="" />
        <path id="hair0" d="" />
        <path id="hair1" d="" />
        <path id="hair2" d="" />
        <path id="eyebrow0" d="" />
        <path id="eyebrow1" d="" />
      </svg>
    </div>
    <script src="js/bootstrap.min.js"></script>
  </body>
</html>
